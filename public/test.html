<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Dashboard</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="http://adminhost/vendor/adminlte/vendor/bootstrap/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="http://adminhost/vendor/adminlte/vendor/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="http://adminhost/vendor/adminlte/vendor/Ionicons/css/ionicons.min.css">

            <!-- Select2 -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.css">

    <!-- Theme style -->
    <link rel="stylesheet" href="http://adminhost/vendor/adminlte/dist/css/AdminLTE.min.css">

            <!-- DataTables -->
        <link rel="stylesheet" href="//cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">

        <link rel="stylesheet"
          href="http://adminhost/vendor/adminlte/dist/css/skins/skin-blue.min.css ">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition skin-blue sidebar-mini fixed">

    <div class="wrapper">

        <!-- Main Header -->
        <header class="main-header">
                        <!-- Logo -->
            <a href="http://adminhost" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>F</b>1.0</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>FARAIS</b>1.0</span>
            </a>

            <!-- Header Navbar -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>
                            <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">

                    <ul class="nav navbar-nav">
                        <li>
                                                            <a href="#"
                                   onclick="event.preventDefault(); document.getElementById('logout-form').submit();"
                                >
                                    <i class="fa fa-fw fa-power-off"></i> Log Out
                                </a>
                                <form id="logout-form" action="http://adminhost/logout" method="POST" style="display: none;">
                                                                        <input type="hidden" name="_token" value="FEI1RrmlKha6KIOnBr4zjZX0dDkKDes9N50cqjZq">
                                </form>
                                                    </li>
                    </ul>
                </div>
                            </nav>
        </header>

                <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">

            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">

                <!-- Sidebar Menu -->
                <ul class="sidebar-menu" data-widget="tree">
                    <li class="">
        <a href="http://adminhost"
                   >
            <i class="fa fa-fw fa-dashboard "></i>
            <span>Dashboard</span>
                    </a>
            </li>
<li class="header">MAIN NAVIGATION</li>
<li class="treeview">
        <a href="#"
                   >
            <i class="fa fa-fw fa-table "></i>
            <span>Questions</span>
                            <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
                </span>
                    </a>
                    <ul class="treeview-menu">
                <li class="">
        <a href="http://adminhost/question/aw"
                   >
            <i class="fa fa-fw fa-circle-o text-blue"></i>
            <span>Analytical Writing Assignment</span>
                    </a>
            </li>
<li class="">
        <a href="http://adminhost/question/vb"
                   >
            <i class="fa fa-fw fa-circle-o text-yellow"></i>
            <span>Verbal</span>
                    </a>
            </li>
            </ul>
            </li>
<li class="treeview">
        <a href="#"
                   >
            <i class="fa fa-fw fa-newspaper-o "></i>
            <span>Review</span>
                            <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
                </span>
                    </a>
                    <ul class="treeview-menu">
                <li class="">
        <a href="http://adminhost/review/aw"
                   >
            <i class="fa fa-fw fa-circle-o text-aqua"></i>
            <span>Analytical Writing Assignment</span>
                    </a>
            </li>
            </ul>
            </li>
                </ul>
                <!-- /.sidebar-menu -->
            </section>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">

            <!-- Content Header (Page header) -->
            <section class="content-header">
                  <h1>
    Question Editor
    <small>Advanced and Full of Features</small>
  </h1>

  <ol class="breadcrumb">
    <li><a href="/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
    <li class="breadcrumb-item">Question</li>
    <li class="breadcrumb-item active"> Editor </li>
  </ol>
            </section>

            <!-- Main content -->
            <section class="content">

                  <div class="col-md-9">
    <div class="box box-info">
  <!-- /.box-header -->
  <div class="box-body pad">
    <input type="hidden" name="db" value="VB"/>
          <input type="hidden" name="id" value="33">
        <textarea id="editor" class="col-md-12">
            <p>Vitacorp, a manufacturer, wishes to make its information booth at an industry convention more productive in terms of boosting sales. The booth offers information introducing the company&rsquo;s new products and services. To achieve the desired result, Vitacorp&rsquo;s marketing department will attempt to attract more people to the booth. The marketing director&rsquo;s ﬁrst measure was to instruct each salesperson to call his or her ﬁve best customers and personally invite them to visit the booth.</p>

<p>Which of the following, if true, most strongly supports the prediction that the marketing director&rsquo;s ﬁrst measure will contribute to meeting the goal of boosting sales?</p>
        </textarea>

  </div>
</div>
<!-- /.box -->
  </div>
  <div class="col-md-3">

            <div class="box box-info" id="catagory">
  <div class="box-header with-border">
    <h3 class="box-title">Catagory</h3>

    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
      </button>
    </div>
    <!-- /.box-tools -->
  </div>
  <!-- /.box-header -->
  <div class="box-body">
    <div class="form-group">
        <select class="form-control" name="cata" id="cata" required>
                                    <option value="CRE">Critical Reasoning</option>
                          <option value="RCM">Reading Comprehension</option>
                          <option value="SCN">Sentence Correction</option>
                              </select>
    </div>
  </div>
  <!-- /.box-body -->
</div>


<div class="box box-info collapsed-box" id="difficulty-level">
  <div class="box-header with-border">
    <h3 class="box-title">Difficulty Level</h3>

    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
      </button>
    </div>
    <!-- /.box-tools -->
  </div>
  <!-- /.box-header -->
  <div class="box-body">
    <div class="form-group">
        <select class="form-control" name="dif" required>
                                    <option value="m">Medium</option>
                          <option value="e">Easy</option>
                          <option value="h">hard</option>

        </select>
    </div>
  </div>
  <!-- /.box-body -->
</div>


<div class="box box-info collapsed-box" id="statement">
  <div class="box-header with-border">
    <h3 class="box-title">Statement</h3>

    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
      </button>
    </div>
    <!-- /.box-tools -->
  </div>
  <!-- /.box-header -->
  <div class="box-body">
    <div class="form-group">
              <input type="text" name="statement" class="form-control" placeholder="(optional)">
          </div>
  </div>
  <!-- /.box-body -->
</div>


<div class="box box-info collapsed-box" id="options">
  <div class="box-header with-border">
    <h3 class="box-title" data-toggle="modal" data-target="#option-dialog">Option</h3>
    <div class="modal fade" id="option-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Options</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body  option-group">
          <div class="form-group">
            <button class="btn btn-primary" type="button" id="add-option"><span class="fa fa-plus"></span> Add Options</button>
          </div>
                                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                <input type="text" class="form-control option-input" name="71" id="1" value="Vitacorp’s salespeople routinely inform each important customer about new products and services as soon as the decision to launch them has been made." placeholder="Option 1">
                                    <div class="input-group-addon"><input type="checkbox" class="form-checkbox" name="is_correct" id="is_correct-71" value="1"></div>

                              </div>
              <br>
                          <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                <input type="text" class="form-control option-input" name="72" id="2" value="Many of Vitacorp’s competitors have made plans for making their own information booths more productive in increasing sales." placeholder="Option 2">
                                    <div class="input-group-addon"><input type="checkbox" class="form-checkbox" name="is_correct" id="is_correct-72" value="1"></div>

                              </div>
              <br>
                          <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                <input type="text" class="form-control option-input" name="73" id="3" value="An information booth that is well attended tends to attract visitors who would not otherwise have attended the booth." placeholder="Option 3">
                                    <div class="input-group-addon"><input type="checkbox" class="form-checkbox" name="is_correct" id="is_correct-73" value="1" checked></div>
                              </div>
              <br>
                          <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                <input type="text" class="form-control option-input" name="74" id="4" value="Most of Vitacorp’s best customers also have business dealings with Vitacorp’s competitors." placeholder="Option 4">
                                    <div class="input-group-addon"><input type="checkbox" class="form-checkbox" name="is_correct" id="is_correct-74" value="1"></div>

                              </div>
              <br>
                          <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                <input type="text" class="form-control option-input" name="75" id="5" value="Vitacorp has fewer new products and services available this year than it had in previous years." placeholder="Option 5">
                                    <div class="input-group-addon"><input type="checkbox" class="form-checkbox" name="is_correct" id="is_correct-75" value="1"></div>

                              </div>
              <br>
                                </div>
      </div>
    </div>
  </div>
    <!-- /.box-tools -->
  </div>
  <!-- /.box-header -->

  <!-- /.box-body -->
</div>


<div class="box box-info collapsed-box" id="question">
  <div class="box-header with-border">
    <h3 class="box-title" data-toggle="modal" data-target="#question-dialog">Question</h3>
    <div class="modal fade" id="question-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Question</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <textarea id="mini-editor"></textarea>

        </div>
        <div class="modal-footer">

        </div>
      </div>
    </div>
  </div>

  </div>



</div>


<div class="box box-info">
    <div class="form-group">
      <div class="box-body with-border">
        <button type="submit" name="submit" class="btn btn-primary" id="save"> <span class="fa fa-floppy-o"></span> Save </button>
        <button type="reset" name="reset" class="btn btn-default" id="reset"> <span class="fa fa-trash-o"></span> Discard </button>
      </div>
    </div>
  <!-- /.box-body -->
</div>

  </div>

            </section>
            <!-- /.content -->
                    </div>
        <!-- /.content-wrapper -->

    </div>
    <!-- ./wrapper -->

<script src="http://adminhost/vendor/adminlte/vendor/jquery/dist/jquery.min.js"></script>
<script src="http://adminhost/vendor/adminlte/vendor/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Select2 -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <!-- DataTables -->
    <script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>

    <script src="http://adminhost/vendor/adminlte/dist/js/adminlte.min.js"></script>
          <script src="http://adminhost/assets/vendor/ckeditor/ckeditor.js"></script>

  <script src="http://adminhost/assets/js/question.js" charset="utf-8"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      // initialize the CKEditor
      var editor = CKEDITOR.replace('editor',{
        customConfig: '/assets/js/editor/config.js',
        extraPlugins: 'bootstrapTabs',
        contentsCss: [ 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css' ],
        on: {
          instanceReady: loadBootstrap,
          mode: loadBootstrap
        },
      });

      // Add the necessary jQuery and Bootstrap JS source so that tabs are clickable.
      // If you're already using Bootstrap JS with your editor instances, then this is not necessary.
      function loadBootstrap(event) {
          if (event.name == 'mode' && event.editor.mode == 'source')
              return; // Skip loading jQuery and Bootstrap when switching to source mode.

          var jQueryScriptTag = document.createElement('script');
          var bootstrapScriptTag = document.createElement('script');

          jQueryScriptTag.src = 'https://code.jquery.com/jquery-1.11.3.min.js';
          bootstrapScriptTag.src = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js';

          var editorHead = event.editor.document.$.head;

          editorHead.appendChild(jQueryScriptTag);
          jQueryScriptTag.onload = function() {
            editorHead.appendChild(bootstrapScriptTag);
          };
      }
      var ref = CKEDITOR.tools.addFunction( function() {
        alert( 'Hello!');
      } );

      // TODO: Change The Insert .
      function insertSTIGT(){
        return {

          other: false
          };
      }
      function insertBMCQC(){
        return {
          // statement : $("#statement").val(),
          // option :{},
          //
          other: false
          };
      }
      function insertBMCQR(){
        return {
          // statement : $("#statement").val(),
          // option :{},
          //
          other: false
        };
      }
      function insertRCM(){
        var options = [];
          $('.option-input').each(function () {
            var option = new Object();
            option.oid = $(this).attr('name');
            option.id = $(this).attr('id');
            option.content = $(this).val();
            if(typeof option.oid == 'undefined') option.is_correct= $("#is_correct-"+option.id).is(":checked");
            else option.is_correct= $("#is_correct-"+option.oid).is(":checked");
            options.push({
                option});
                console.log("#is_correct-"+option.id);
        });
        return {
          _token:$("input[name=_token]").val(),
          title:$("input[name=title]").val(),
          statement:$("input[name=statement]").val(),
          question:editor.getData(),
          type:'passage',
          cata:$("select[name=cata] option:selected").val(),
          table:$("input[name=db]").val(),
          id:$("input[name=id]").val(),
          dif:$("select[name=dif] option:selected").val(),
          option:options,
         };
        }
        function insertCRE(){
          var options = [];
            $('.option-input').each(function () {
              var option = new Object();
              option.oid = $(this).attr('name');
              option.id = $(this).attr('id');
              option.content = $(this).val();
              if(typeof option.oid == 'undefined') option.is_correct= $("#is_correct-"+option.id).is(":checked");
              else option.is_correct= $("#is_correct-"+option.oid).is(":checked");
              options.push({
                  option});
                  console.log("#is_correct-"+option.id);
          });
          return {
            _token:$("input[name=_token]").val(),
            title:$("input[name=title]").val(),
            statement:$("input[name=statement]").val(),
            question:editor.getData(),
            type:'simple',
            cata:$("select[name=cata] option:selected").val(),
            table:$("input[name=db]").val(),
            id:$("input[name=id]").val(),
            dif:$("select[name=dif] option:selected").val(),
            option:options,
           };
          }
          function insertSCN(){
            var options = [];
              $('.option-input').each(function () {
                var option = new Object();
                option.oid = $(this).attr('name');
                option.id = $(this).attr('id');
                option.content = $(this).val();
                if(typeof option.oid == 'undefined') option.is_correct= $("#is_correct-"+option.id).is(":checked");
                else option.is_correct= $("#is_correct-"+option.oid).is(":checked");
                options.push({
                    option});
                    console.log("#is_correct-"+option.id);
            });
            return {
              _token:$("input[name=_token]").val(),
              title:$("input[name=title]").val(),
              statement:$("input[name=statement]").val(),
              question:editor.getData(),
              type:'simple',
              cata:$("select[name=cata] option:selected").val(),
              table:$("input[name=db]").val(),
              id:$("input[name=id]").val(),
              dif:$("select[name=dif] option:selected").val(),
              option:options,
             };
            }
      function insertAOA(){
          return { _token:$("input[name=_token]").val(),
            question:editor.getData(),
            cata:$("select[name=cata] option:selected").val(),
            table:$("input[name=db]").val(),
            id:$("input[name=id]").val(),
            dif:'h',
           };
      }
      function getTypeOption(){
          var val = $("#cata option:selected").val();
              return eval("insert" + val + "();");
      }
    //edit Options

    function btalert(alertType,message){
      var indicator = [];
      indicator["success"] = "Well done!";
      indicator["danger"] = "Oh snap!";
      indicator["warning"] = "Attention!";
      $(".content").prepend('<div class="noti alert alert-'+alertType+' alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>'+indicator[alertType]+'</strong> '+message+'</div>');
      $(".noti").fadeTo(2000, 500).slideUp(500, function(){
        $(".noti").remove();
    });
    }

    // function prepareUpload(event)
    // {
    // Store the Content in Database
    $("#save").on('click',function(){
      var data = getTypeOption();
      $.ajax({
                url: '/question/update',

        type: 'POST',
        dataType: 'html',
        data: data,
        beforeSend: function() {
              $(".loader-icon").show();
          },
        error: function(data){
            console.log(data.statusText);
            btalert('danger',"we can't save the post right now");
              $(".loader-icon").fadeOut('slow')
        },
        success: function(data)
        {
          // var obj = $.parseJSON(data);
          console.log(data);
          // if(obj.sent == true){

          window.setTimeout(function(){
          // Move to a new location or you can do something else
          window.location.href = "/question/vb";
        }, 1000);


            btalert('success',data);
            $(".loader-icon").fadeOut('slow');
            console.log(data);
          // }
        },
        timeout:3000,
      });
    });

      addOptions();
      hideall();
      selectTypeOption();
    });
  </script>

</body>
</html>
